<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>호텔어라운드 평창 - 운영 대시보드</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --primary: #1a365d;
            --primary-light: #2d5a9e;
            --accent: #e6a817;
            --danger: #dc3545;
            --success: #28a745;
            --bg: #f0f2f5;
            --card: #ffffff;
            --text: #2d3748;
            --text-light: #718096;
            --border: #e2e8f0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', 'Malgun Gothic', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 24px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 { font-size: 24px; font-weight: 700; }
        .header .subtitle { font-size: 14px; opacity: 0.8; margin-top: 4px; }
        .header .date-badge {
            background: rgba(255,255,255,0.15);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 13px;
        }

        .container { max-width: 1440px; margin: 0 auto; padding: 24px; }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            gap: 4px;
            background: var(--card);
            border-radius: 12px;
            padding: 6px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        .tab-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-light);
            transition: all 0.2s;
        }
        .tab-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 2px 8px rgba(26,54,93,0.3);
        }
        .tab-btn:hover:not(.active) { background: var(--bg); color: var(--text); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* KPI Cards */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        .kpi-card {
            background: var(--card);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            border-left: 4px solid var(--primary);
            transition: transform 0.2s;
        }
        .kpi-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.12); }
        .kpi-card.danger { border-left-color: var(--danger); }
        .kpi-card.success { border-left-color: var(--success); }
        .kpi-card.accent { border-left-color: var(--accent); }
        .kpi-label { font-size: 12px; color: var(--text-light); font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
        .kpi-value { font-size: 26px; font-weight: 800; margin: 8px 0 4px; }
        .kpi-sub { font-size: 12px; color: var(--text-light); }
        .kpi-value.negative { color: var(--danger); }
        .kpi-value.positive { color: var(--success); }

        /* Chart Cards */
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }
        .chart-grid.single { grid-template-columns: 1fr; }
        .chart-card {
            background: var(--card);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        .chart-card.full { grid-column: 1 / -1; }
        .chart-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .chart-title .icon { font-size: 20px; }
        .chart-wrapper { position: relative; height: 320px; }
        .chart-wrapper.tall { height: 400px; }

        /* Data Table */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        .data-table th {
            background: var(--primary);
            color: white;
            padding: 10px 12px;
            text-align: right;
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        .data-table th:first-child { text-align: left; border-radius: 8px 0 0 0; }
        .data-table th:last-child { border-radius: 0 8px 0 0; }
        .data-table td {
            padding: 8px 12px;
            border-bottom: 1px solid var(--border);
            text-align: right;
        }
        .data-table td:first-child { text-align: left; font-weight: 600; }
        .data-table tr:hover { background: #f7fafc; }
        .data-table tr.total-row { background: #edf2f7; font-weight: 700; }
        .data-table tr.total-row td { border-top: 2px solid var(--primary); }
        .data-table .negative { color: var(--danger); }
        .data-table .positive { color: var(--success); }

        /* Insight Box */
        .insight-box {
            background: linear-gradient(135deg, #ebf8ff 0%, #f0fff4 100%);
            border: 1px solid #bee3f8;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
        }
        .insight-box h3 { font-size: 15px; color: var(--primary); margin-bottom: 12px; }
        .insight-box ul { padding-left: 20px; }
        .insight-box li { font-size: 13px; margin-bottom: 6px; color: var(--text); }

        /* Daily Report Section */
        .daily-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }
        .daily-card {
            background: var(--card);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        .daily-card .label { font-size: 12px; color: var(--text-light); font-weight: 600; }
        .daily-card .value { font-size: 22px; font-weight: 800; margin: 8px 0; color: var(--primary); }
        .daily-card .sub { font-size: 11px; color: var(--text-light); }

        /* Comparison Section */
        .compare-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        .compare-card {
            background: var(--card);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        .compare-card h4 { font-size: 14px; font-weight: 700; margin-bottom: 12px; }
        .compare-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
            font-size: 13px;
        }
        .compare-item:last-child { border-bottom: none; }

        .progress-bar {
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 6px;
        }
        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            margin: 24px 0 16px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--primary);
            display: inline-block;
        }

        @media (max-width: 768px) {
            .chart-grid, .compare-grid, .daily-grid { grid-template-columns: 1fr; }
            .kpi-grid { grid-template-columns: repeat(2, 1fr); }
            .header { flex-direction: column; gap: 12px; text-align: center; }
            .container { padding: 16px; }
        }
    </style>
</head>
<body>

<div class="header">
    <div>
        <h1>HOTEL AROUND PYEONGCHANG</h1>
        <div class="subtitle">호텔어라운드 평창 운영 현황 대시보드</div>
    </div>
    <div class="date-badge">데이터 기준: 2025년 10월 ~ 2026년 2월</div>
</div>

<div class="container">
    <!-- Tab Navigation -->
    <div class="tab-nav">
        <button class="tab-btn active" onclick="switchTab('overview')">종합 현황</button>
        <button class="tab-btn" onclick="switchTab('revenue')">매출 분석</button>
        <button class="tab-btn" onclick="switchTab('expense')">비용 분석</button>
        <button class="tab-btn" onclick="switchTab('rooms')">객실 운영</button>
        <button class="tab-btn" onclick="switchTab('fnb')">F&B 분석</button>
        <button class="tab-btn" onclick="switchTab('pl')">손익계산서</button>
    </div>

    <!-- ==================== TAB 1: 종합 현황 ==================== -->
    <div id="tab-overview" class="tab-content active">
        <div class="kpi-grid">
            <div class="kpi-card success">
                <div class="kpi-label">누적 객실매출 (11월~2월)</div>
                <div class="kpi-value positive">15.15억</div>
                <div class="kpi-sub">1,515,527,727원 (VAT포함)</div>
            </div>
            <div class="kpi-card success">
                <div class="kpi-label">1월 객실매출 (최고)</div>
                <div class="kpi-value positive">6.19억</div>
                <div class="kpi-sub">618,813,926원 / OCC 52.9%</div>
            </div>
            <div class="kpi-card accent">
                <div class="kpi-label">2월 객실매출 (~8일)</div>
                <div class="kpi-value">4.75억</div>
                <div class="kpi-sub">475,340,688원 / OCC 39.5%</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">누적 F&B매출 (12월~2월)</div>
                <div class="kpi-value">1.57억</div>
                <div class="kpi-sub">156,630,244원</div>
            </div>
            <div class="kpi-card danger">
                <div class="kpi-label">10~12월 순손실</div>
                <div class="kpi-value negative">-0.79억</div>
                <div class="kpi-sub">-79,082,217원 (비용 5.4억 > 매출 4.19억)</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">누적 판매 객실수</div>
                <div class="kpi-value">12,579실</div>
                <div class="kpi-sub">11월~2월(~8일) 합산</div>
            </div>
        </div>

        <div class="insight-box">
            <h3>핵심 인사이트</h3>
            <ul>
                <li><strong>누적 객실매출 15.15억:</strong> 11월(4,828만) → 12월(3.73억) → 1월(6.19억) → 2월(4.75억, ~8일) 급격한 성장세</li>
                <li><strong>1월 역대 최고 실적:</strong> 객실 5,563실, OCC 52.9%, 매출 6.19억 달성 — 전 운영사 동기(3,453실) 대비 +61%</li>
                <li><strong>F&B 매출 급성장:</strong> 12월 4,973만 → 1월 8,800만(+77%) → 2월 1,890만(9일간), 로봇 배달로 야식매출 2,400만 신규 창출</li>
                <li><strong>비용 구조 (10~12월):</strong> 비용 5.4억 > 매출 4.19억, 순손실 7,900만 — 지급수수료(28.3%), 소모품비(15.9%), 전력비(13.6%)</li>
                <li><strong>객실 판매 2배 성장:</strong> 전 운영사 동기 7,580실 → 약 14,000실 예상 (12~2월 누적)</li>
                <li><strong>2월 전망:</strong> 8일간 3,883실(OCC 39.5%) 이미 달성, 월말 기준 5,000실 이상 예상</li>
            </ul>
        </div>

        <div class="chart-grid">
            <div class="chart-card">
                <div class="chart-title">월별 매출 추이 (VAT 포함)</div>
                <div class="chart-wrapper"><canvas id="monthlyRevChart"></canvas></div>
            </div>
            <div class="chart-card">
                <div class="chart-title">매출 vs 비용 (10~12월)</div>
                <div class="chart-wrapper"><canvas id="revVsExpChart"></canvas></div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-card">
                <div class="chart-title">누적 매출 구성 비율 (11월~2월)</div>
                <div class="chart-wrapper"><canvas id="revBreakdownChart"></canvas></div>
            </div>
            <div class="chart-card">
                <div class="chart-title">월별 객실수 & 점유율 (OCC%)</div>
                <div class="chart-wrapper"><canvas id="occTrendChart"></canvas></div>
            </div>
        </div>
    </div>

    <!-- ==================== TAB 2: 매출 분석 ==================== -->
    <div id="tab-revenue" class="tab-content">
        <div class="kpi-grid">
            <div class="kpi-card success">
                <div class="kpi-label">누적 객실매출 (11월~2월)</div>
                <div class="kpi-value positive">15.15억</div>
                <div class="kpi-sub">1,515,527,727원 (VAT포함)</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">1월 객실매출</div>
                <div class="kpi-value">6.19억</div>
                <div class="kpi-sub">618,813,926원 (최고 실적)</div>
            </div>
            <div class="kpi-card accent">
                <div class="kpi-label">누적 F&B매출 (12~2월)</div>
                <div class="kpi-value">1.57억</div>
                <div class="kpi-sub">49,726,474 + 88,002,370 + 18,901,400</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">장기기숙사+관리비 (12월)</div>
                <div class="kpi-value">2,709만</div>
                <div class="kpi-sub">26,880,000 + 206,182원</div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-card full">
                <div class="chart-title">월별 매출 상세 내역</div>
                <div class="chart-wrapper tall"><canvas id="monthlyRevDetailChart"></canvas></div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-card">
                <div class="chart-title">월별 ADR (평균 객실 단가) 추이</div>
                <div class="chart-wrapper"><canvas id="adrChart"></canvas></div>
            </div>
            <div class="chart-card">
                <div class="chart-title">객실 매출 vs 부대 매출 비중</div>
                <div class="chart-wrapper"><canvas id="roomVsOtherChart"></canvas></div>
            </div>
        </div>

        <div class="chart-card" style="margin-bottom:24px;">
            <div class="chart-title">월별 매출 상세 (단위: 원, VAT포함 기준)</div>
            <div style="overflow-x:auto;">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th style="text-align:left;">구분</th>
                            <th>10월</th>
                            <th>11월</th>
                            <th>12월</th>
                            <th style="background:#1e6b3a;">1월</th>
                            <th style="background:#1e6b3a;">2월(~8일)</th>
                            <th>누적 합계</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>객실매출</td>
                            <td>0</td>
                            <td>48,277,123</td>
                            <td>373,096,290</td>
                            <td style="background:#f0fff4;"><strong>618,813,926</strong></td>
                            <td style="background:#f0fff4;"><strong>475,340,688</strong></td>
                            <td><strong>1,515,527,727</strong></td>
                        </tr>
                        <tr>
                            <td>F&B매출</td>
                            <td>0</td>
                            <td>0</td>
                            <td>49,726,474</td>
                            <td style="background:#f0fff4;"><strong>88,002,370</strong></td>
                            <td style="background:#f0fff4;"><strong>18,901,400</strong></td>
                            <td><strong>156,630,244</strong></td>
                        </tr>
                        <tr>
                            <td>장기기숙사수입</td>
                            <td>0</td>
                            <td>0</td>
                            <td>26,880,000</td>
                            <td style="background:#f0fff4;">-</td>
                            <td style="background:#f0fff4;">-</td>
                            <td><strong>26,880,000</strong></td>
                        </tr>
                        <tr>
                            <td>관리비수입</td>
                            <td>0</td>
                            <td>0</td>
                            <td>206,182</td>
                            <td style="background:#f0fff4;">-</td>
                            <td style="background:#f0fff4;">-</td>
                            <td><strong>206,182</strong></td>
                        </tr>
                        <tr class="total-row">
                            <td>합계</td>
                            <td>0</td>
                            <td>48,277,123</td>
                            <td>449,908,946</td>
                            <td style="background:#e6ffed;"><strong>706,816,296</strong></td>
                            <td style="background:#e6ffed;"><strong>494,242,088</strong></td>
                            <td><strong>1,699,244,153</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div style="font-size:12px;color:var(--text-light);margin-top:8px;">
                * 1월/2월 객실매출: 질의답변서 기준 (VAT포함) | F&B: 매장별 결제 집계 기준 | 1월/2월 기숙사·관리비: ERP 마감 전 미확정
            </div>
        </div>
    </div>

    <!-- ==================== TAB 3: 비용 분석 ==================== -->
    <div id="tab-expense" class="tab-content">
        <div class="kpi-grid">
            <div class="kpi-card danger">
                <div class="kpi-label">총 비용 (10~12월)</div>
                <div class="kpi-value">5.40억</div>
                <div class="kpi-sub">539,784,612원</div>
            </div>
            <div class="kpi-card danger">
                <div class="kpi-label">인건비 합계</div>
                <div class="kpi-value">1.15억</div>
                <div class="kpi-sub">114,709,323원 (21.3%)</div>
            </div>
            <div class="kpi-card accent">
                <div class="kpi-label">운영비 합계</div>
                <div class="kpi-value">4.25억</div>
                <div class="kpi-sub">425,075,289원 (78.7%)</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">비용 대비 매출 비율</div>
                <div class="kpi-value negative">77.7%</div>
                <div class="kpi-sub">매출/비용 = 0.777</div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-card">
                <div class="chart-title">비용 항목 TOP 10</div>
                <div class="chart-wrapper tall"><canvas id="expTop10Chart"></canvas></div>
            </div>
            <div class="chart-card">
                <div class="chart-title">비용 카테고리별 구성</div>
                <div class="chart-wrapper tall"><canvas id="expCategoryChart"></canvas></div>
            </div>
        </div>

        <div class="chart-grid single">
            <div class="chart-card full">
                <div class="chart-title">월별 주요 비용 변동 추이</div>
                <div class="chart-wrapper tall"><canvas id="monthlyExpTrendChart"></canvas></div>
            </div>
        </div>

        <div class="chart-card" style="margin-bottom:24px;">
            <div class="chart-title">비용 전체 내역 (단위: 원)</div>
            <div style="overflow-x:auto; max-height:500px;">
                <table class="data-table" id="expenseTable">
                    <thead>
                        <tr>
                            <th style="text-align:left;">계정과목</th>
                            <th>10월</th>
                            <th>11월</th>
                            <th>12월</th>
                            <th>합계</th>
                            <th>비율</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- ==================== TAB 4: 객실 운영 ==================== -->
    <div id="tab-rooms" class="tab-content">
        <h3 class="section-title">월별 객실 운영 지표 (VAT 포함)</h3>
        <div class="kpi-grid">
            <div class="kpi-card success">
                <div class="kpi-label">1월 매출 (최고)</div>
                <div class="kpi-value positive">6.19억</div>
                <div class="kpi-sub">618,813,926원 / 5,563실</div>
            </div>
            <div class="kpi-card success">
                <div class="kpi-label">1월 OCC (최고)</div>
                <div class="kpi-value positive">52.9%</div>
                <div class="kpi-sub">최고 점유율 달성</div>
            </div>
            <div class="kpi-card accent">
                <div class="kpi-label">12월 ADR (최고)</div>
                <div class="kpi-value">139,215원</div>
                <div class="kpi-sub">성수기 단가 최고치</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">2월 현재 (8일 기준)</div>
                <div class="kpi-value">4.75억</div>
                <div class="kpi-sub">3,883실 / OCC 39.5%</div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-card full">
                <div class="chart-title">월별 객실 운영 현황 (숙박 기준, VAT 포함)</div>
                <div class="chart-wrapper tall"><canvas id="roomOpsChart"></canvas></div>
            </div>
        </div>

        <div class="chart-card" style="margin-bottom:24px;">
            <div class="chart-title">객실 운영 상세 데이터</div>
            <div style="overflow-x:auto;">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th style="text-align:left;">월</th>
                            <th>판매 객실수</th>
                            <th>ADR (원)</th>
                            <th>OCC (%)</th>
                            <th>객실 매출 (VAT포함)</th>
                            <th>비고</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>2025년 11월</td><td>453</td><td>106,572</td><td>3.7%</td><td>48,277,123</td><td>운영 준비기</td></tr>
                        <tr><td>2025년 12월</td><td>2,680</td><td>139,215</td><td>23.8%</td><td>373,096,290</td><td>본격 운영 시작</td></tr>
                        <tr style="background:#f0fff4;"><td>2026년 1월</td><td>5,563</td><td>111,237</td><td>52.9%</td><td>618,813,926</td><td>최고 실적</td></tr>
                        <tr><td>2026년 2월 (~8일)</td><td>3,883</td><td>122,416</td><td>39.5%</td><td>475,340,688</td><td>진행 중</td></tr>
                        <tr><td>2026년 3월 (~8일)</td><td>243</td><td>93,995</td><td>2.1%</td><td>22,840,698</td><td>사전 예약</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <h3 class="section-title">금일 운영 현황 (2026.02.09)</h3>
        <div class="daily-grid">
            <div class="daily-card">
                <div class="label">TODAY 판매 객실</div>
                <div class="value">167실</div>
                <div class="sub">OCC 47.4% / ADR ₩69,606</div>
                <div class="sub">REV ₩11,566,963</div>
            </div>
            <div class="daily-card">
                <div class="label">TOMORROW 예상</div>
                <div class="value">108실</div>
                <div class="sub">OCC 30.7% / ADR ₩66,623</div>
                <div class="sub">REV ₩7,195,322</div>
            </div>
            <div class="daily-card">
                <div class="label">2월 누적</div>
                <div class="value">4,028실</div>
                <div class="sub">OCC 41.0% / ADR ₩111,629</div>
                <div class="sub">REV ₩449,643,566</div>
            </div>
        </div>

        <div class="insight-box">
            <h3>전 운영사 대비 성과 비교 (동기간 12~2월)</h3>
            <ul>
                <li><strong>바로네트웍스 (24.12~25.2):</strong> 총 7,580실 판매 (12월 2,101 + 1월 3,453 + 2월 2,026)</li>
                <li><strong>AZMT (25.12~26.2):</strong> 총 약 14,000실 예상 (12월 2,680 + 1월 5,563 + 2월 3,883~) → <strong style="color:var(--success);">약 2배 성장</strong></li>
                <li>1월 객실 판매: 3,453실 → 5,563실 (+61.1% 증가)</li>
            </ul>
        </div>
    </div>

    <!-- ==================== TAB 5: F&B 분석 ==================== -->
    <div id="tab-fnb" class="tab-content">
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-label">12월 F&B 총 매출</div>
                <div class="kpi-value">4,973만</div>
                <div class="kpi-sub">49,726,474원</div>
            </div>
            <div class="kpi-card success">
                <div class="kpi-label">1월 F&B 총 매출</div>
                <div class="kpi-value positive">8,800만</div>
                <div class="kpi-sub">88,002,370원 (+77%)</div>
            </div>
            <div class="kpi-card accent">
                <div class="kpi-label">2월 F&B 누적 (9일)</div>
                <div class="kpi-value">1,890만</div>
                <div class="kpi-sub">18,901,400원</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">야식/배달 매출 (1월)</div>
                <div class="kpi-value">2,400만</div>
                <div class="kpi-sub">로봇 배달 서비스 신규 매출</div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-card">
                <div class="chart-title">12월 F&B 매출 구성</div>
                <div class="chart-wrapper"><canvas id="fnbDec"></canvas></div>
            </div>
            <div class="chart-card">
                <div class="chart-title">1월 F&B 매출 구성</div>
                <div class="chart-wrapper"><canvas id="fnbJan"></canvas></div>
            </div>
        </div>

        <div class="chart-card" style="margin-bottom:24px;">
            <div class="chart-title">F&B 매장별 상세 (12월 vs 1월)</div>
            <div style="overflow-x:auto;">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th style="text-align:left;">매장명</th>
                            <th>12월 손님수</th>
                            <th>12월 매출</th>
                            <th>12월 객단가</th>
                            <th>1월 손님수</th>
                            <th>1월 매출</th>
                            <th>1월 객단가</th>
                            <th>증감률</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>프론트</td>
                            <td>261</td><td>33,874,074</td><td>129,786</td>
                            <td>545</td><td>46,968,220</td><td>86,180</td>
                            <td class="positive">+38.7%</td>
                        </tr>
                        <tr>
                            <td>룸서비스</td>
                            <td>394</td><td>7,264,200</td><td>18,437</td>
                            <td>712</td><td>23,162,400</td><td>32,531</td>
                            <td class="positive">+218.8%</td>
                        </tr>
                        <tr>
                            <td>레스토랑</td>
                            <td>196</td><td>8,588,200</td><td>43,817</td>
                            <td>361</td><td>16,909,400</td><td>46,840</td>
                            <td class="positive">+96.9%</td>
                        </tr>
                        <tr>
                            <td>밀키샵</td>
                            <td>-</td><td>-</td><td>-</td>
                            <td>38</td><td>962,350</td><td>25,325</td>
                            <td class="positive">신규</td>
                        </tr>
                        <tr class="total-row">
                            <td>합계</td>
                            <td>851</td><td>49,726,474</td><td>-</td>
                            <td>1,656</td><td>88,002,370</td><td>-</td>
                            <td class="positive">+77.0%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-card">
                <div class="chart-title">F&B 매장별 매출 비교 (12월 vs 1월)</div>
                <div class="chart-wrapper"><canvas id="fnbCompareChart"></canvas></div>
            </div>
            <div class="chart-card">
                <div class="chart-title">월별 F&B 총 매출 추이</div>
                <div class="chart-wrapper"><canvas id="fnbMonthlyTotal"></canvas></div>
            </div>
        </div>

        <div class="insight-box">
            <h3>2월 F&B 현황 (2/9 기준, 일매출보고서)</h3>
            <ul>
                <li><strong>당일 조식:</strong> ₩376,000 / 조식 누적 월매출: ₩2,809,200</li>
                <li><strong>룸서비스:</strong> ₩531,700 / 룸서비스 누적 월매출: ₩7,864,000</li>
                <li><strong>예약조식:</strong> ₩176,000 / 예약조식 누적: ₩8,228,200</li>
                <li><strong>F&B 당일 합계:</strong> ₩1,083,700 / <strong>F&B 누적 월매출: ₩18,901,400</strong></li>
                <li><strong>일평균 F&B:</strong> 약 210만원/일 → 월 추정 약 5,880만원</li>
            </ul>
        </div>
    </div>

    <!-- ==================== TAB 6: 손익계산서 ==================== -->
    <div id="tab-pl" class="tab-content">
        <div class="kpi-grid">
            <div class="kpi-card success">
                <div class="kpi-label">총 수익</div>
                <div class="kpi-value positive">4.61억</div>
                <div class="kpi-sub">매출 419,192,517 + 영업외 41,510,778</div>
            </div>
            <div class="kpi-card danger">
                <div class="kpi-label">총 비용</div>
                <div class="kpi-value">5.40억</div>
                <div class="kpi-sub">539,784,612 + 잡손실 900</div>
            </div>
            <div class="kpi-card danger">
                <div class="kpi-label">당기순손실</div>
                <div class="kpi-value negative">-7,908만</div>
                <div class="kpi-sub">-79,082,217원</div>
            </div>
            <div class="kpi-card accent">
                <div class="kpi-label">영업이익률</div>
                <div class="kpi-value negative">-28.8%</div>
                <div class="kpi-sub">(매출-비용)/매출</div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-card">
                <div class="chart-title">손익 구조 (Waterfall)</div>
                <div class="chart-wrapper tall"><canvas id="waterfallChart"></canvas></div>
            </div>
            <div class="chart-card">
                <div class="chart-title">비용 대비 매출 커버리지</div>
                <div class="chart-wrapper tall"><canvas id="coverageChart"></canvas></div>
            </div>
        </div>

        <div class="chart-card" style="margin-bottom:24px;">
            <div class="chart-title">손익계산서 (2025년 10~12월 합산)</div>
            <div style="overflow-x:auto;">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th style="text-align:left;">구분</th>
                            <th>계정과목</th>
                            <th>금액 (원)</th>
                            <th>소계 (원)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background:#f0fff4;"><td><strong>매출</strong></td><td>객실매출</td><td style="text-align:right;">383,066,711</td><td></td></tr>
                        <tr style="background:#f0fff4;"><td></td><td>식료매출</td><td style="text-align:right;">9,039,624</td><td></td></tr>
                        <tr style="background:#f0fff4;"><td></td><td>장기기숙사수입</td><td style="text-align:right;">26,880,000</td><td></td></tr>
                        <tr style="background:#f0fff4;"><td></td><td>관리비수입</td><td style="text-align:right;">206,182</td><td style="text-align:right;font-weight:700;">419,192,517</td></tr>
                        <tr><td colspan="4" style="height:8px;background:var(--bg);"></td></tr>
                        <tr style="background:#fff5f5;"><td><strong>비용</strong></td><td>인건비 (급여+수당+일용)</td><td style="text-align:right;">68,552,897</td><td></td></tr>
                        <tr style="background:#fff5f5;"><td></td><td>복리후생비</td><td style="text-align:right;">46,156,426</td><td></td></tr>
                        <tr style="background:#fff5f5;"><td></td><td>시설운영비 (전력+수도+건물 등)</td><td style="text-align:right;">91,601,317</td><td></td></tr>
                        <tr style="background:#fff5f5;"><td></td><td>수수료 (지급+판매)</td><td style="text-align:right;">161,415,937</td><td></td></tr>
                        <tr style="background:#fff5f5;"><td></td><td>소모품+객실용품</td><td style="text-align:right;">116,027,021</td><td></td></tr>
                        <tr style="background:#fff5f5;"><td></td><td>기타 비용</td><td style="text-align:right;">56,031,014</td><td style="text-align:right;font-weight:700;">539,784,612</td></tr>
                        <tr><td colspan="4" style="height:8px;background:var(--bg);"></td></tr>
                        <tr style="background:#ebf8ff;"><td><strong>영업외수익</strong></td><td>이자수익 + 잡이익</td><td style="text-align:right;">41,510,778</td><td style="text-align:right;font-weight:700;">41,510,778</td></tr>
                        <tr style="background:#ebf8ff;"><td><strong>영업외비용</strong></td><td>잡손실</td><td style="text-align:right;">900</td><td style="text-align:right;font-weight:700;">900</td></tr>
                        <tr class="total-row">
                            <td colspan="3" style="text-align:right;font-size:16px;"><strong>당기순손실</strong></td>
                            <td style="text-align:right;font-size:16px;color:var(--danger);"><strong>-79,082,217</strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
// ==============================
// 유틸리티 함수
// ==============================
function fmt(n) { return n.toLocaleString('ko-KR'); }
const colors = {
    blue: '#3182ce', lightBlue: '#63b3ed', darkBlue: '#1a365d',
    green: '#38a169', lightGreen: '#68d391',
    red: '#e53e3e', lightRed: '#fc8181',
    orange: '#dd6b20', yellow: '#ecc94b', purple: '#805ad5',
    gray: '#a0aec0', teal: '#319795', pink: '#d53f8c'
};

// ==============================
// 탭 전환
// ==============================
function switchTab(tabId) {
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById('tab-' + tabId).classList.add('active');
    event.target.classList.add('active');
}

// ==============================
// 데이터 정의
// ==============================
const monthlyRev = {
    labels: ['25년 11월', '25년 12월', '26년 1월', '26년 2월(~8일)', '26년 3월(~8일)'],
    roomRev: [48277123, 373096290, 618813926, 475340688, 22840698],
    occ: [3.7, 23.8, 52.9, 39.5, 2.1],
    adr: [106572, 139215, 111237, 122416, 93995],
    rooms: [453, 2680, 5563, 3883, 243]
};

const expenseData = [
    {name: '직원급여', oct: 8825268, nov: 17719444, dec: 23797041, total: 50341753},
    {name: '제수당', oct: 0, nov: 1626389, dec: 3451755, total: 5078144},
    {name: '임급(일용)', oct: 0, nov: 4500000, dec: 8633000, total: 13133000},
    {name: '복리후생비', oct: 1012000, nov: 5292550, dec: 39851876, total: 46156426},
    {name: '여비교통비', oct: 486098, nov: 0, dec: 257155, total: 743253},
    {name: '통신비', oct: 0, nov: 140625, dec: 3337001, total: 3477626},
    {name: '수도광열비', oct: 0, nov: 0, dec: 3291400, total: 3291400},
    {name: '전력비', oct: 0, nov: 21011732, dec: 52334871, total: 73346603},
    {name: '세금과공과금', oct: 0, nov: 0, dec: 664060, total: 664060},
    {name: '지급임차료', oct: 0, nov: 376841, dec: 10540269, total: 10917110},
    {name: '보험료', oct: 5367280, nov: 5098230, dec: 2429330, total: 12894840},
    {name: '차량유지비', oct: 0, nov: 40000, dec: 334534, total: 374534},
    {name: '운반비', oct: 0, nov: 0, dec: 40000, total: 40000},
    {name: '교육훈련비', oct: 0, nov: 0, dec: 154000, total: 154000},
    {name: '도서인쇄비', oct: 0, nov: 78680, dec: 7217036, total: 7295716},
    {name: '소모품비', oct: 0, nov: 17311277, dec: 68472931, total: 85784208},
    {name: '지급수수료', oct: 1410000, nov: 24401080, dec: 127002223, total: 152813303},
    {name: '광고선전비', oct: 54546, nov: 8909, dec: 11580000, total: 11643455},
    {name: '판매촉진비', oct: 0, nov: 0, dec: 160000, total: 160000},
    {name: '건물관리비', oct: 0, nov: 4822980, dec: 9490334, total: 14313314},
    {name: '판매수수료', oct: 0, nov: 19218, dec: 8583416, total: 8602634},
    {name: '잡비', oct: 0, nov: 1461600, dec: 2753280, total: 4214880},
    {name: '객실관리비', oct: 0, nov: 0, dec: 8921530, total: 8921530},
    {name: '객실소모품비', oct: 0, nov: 5099545, dec: 16221738, total: 21321283},
    {name: '기타수리비', oct: 0, nov: 0, dec: 4101540, total: 4101540}
];

const totalExpense = 539784612;

// ==============================
// 차트 1: 월별 매출 추이
// ==============================
new Chart(document.getElementById('monthlyRevChart'), {
    type: 'bar',
    data: {
        labels: ['25년 11월', '25년 12월', '26년 1월', '26년 2월(~8일)'],
        datasets: [
            {
                label: '객실매출 (VAT포함)',
                data: [48277123, 373096290, 618813926, 475340688],
                backgroundColor: colors.blue,
                borderRadius: 6
            },
            {
                label: 'F&B매출',
                data: [0, 49726474, 88002370, 18901400],
                backgroundColor: colors.orange,
                borderRadius: 6
            }
        ]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        plugins: {
            tooltip: { callbacks: { label: ctx => ctx.dataset.label + ': ' + fmt(ctx.raw) + '원' } }
        },
        scales: {
            x: { stacked: true },
            y: {
                stacked: true,
                ticks: { callback: v => (v/100000000).toFixed(1) + '억' },
                grid: { color: '#f0f0f0' }
            }
        }
    }
});

// ==============================
// 차트 2: 매출 vs 비용
// ==============================
new Chart(document.getElementById('revVsExpChart'), {
    type: 'bar',
    data: {
        labels: ['10월', '11월', '12월'],
        datasets: [
            {
                label: '매출',
                data: [0, 43888290, 375304227],
                backgroundColor: colors.green,
                borderRadius: 6
            },
            {
                label: '비용',
                data: [17155192, 109015100, 413614320],
                backgroundColor: colors.red,
                borderRadius: 6
            }
        ]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        plugins: { tooltip: { callbacks: { label: ctx => ctx.dataset.label + ': ' + fmt(ctx.raw) + '원' } } },
        scales: {
            y: {
                ticks: { callback: v => (v/100000000).toFixed(1) + '억' },
                grid: { color: '#f0f0f0' }
            }
        }
    }
});

// ==============================
// 차트 3: 매출 구성
// ==============================
const totalRevAll = 1699244153;
new Chart(document.getElementById('revBreakdownChart'), {
    type: 'doughnut',
    data: {
        labels: ['객실매출', 'F&B매출', '장기기숙사수입', '관리비수입'],
        datasets: [{
            data: [1515527727, 156630244, 26880000, 206182],
            backgroundColor: [colors.blue, colors.orange, colors.teal, colors.gray],
            borderWidth: 2, borderColor: '#fff'
        }]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        plugins: {
            legend: { position: 'bottom', labels: { padding: 16, font: { size: 12 } } },
            tooltip: { callbacks: { label: ctx => ctx.label + ': ' + fmt(ctx.raw) + '원 (' + ((ctx.raw/totalRevAll)*100).toFixed(1) + '%)' } }
        }
    }
});

// ==============================
// 차트 4: OCC% 트렌드
// ==============================
new Chart(document.getElementById('occTrendChart'), {
    type: 'bar',
    data: {
        labels: monthlyRev.labels,
        datasets: [
            {
                label: '판매 객실수',
                data: monthlyRev.rooms,
                backgroundColor: colors.lightBlue,
                borderRadius: 6,
                yAxisID: 'y'
            },
            {
                label: 'OCC (%)',
                data: monthlyRev.occ,
                type: 'line',
                borderColor: colors.red,
                backgroundColor: 'transparent',
                pointBackgroundColor: colors.red,
                pointRadius: 5,
                borderWidth: 2,
                yAxisID: 'y1'
            }
        ]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        scales: {
            y: { position: 'left', title: { display: true, text: '객실수' }, grid: { color: '#f0f0f0' } },
            y1: { position: 'right', title: { display: true, text: 'OCC%' }, min: 0, max: 60, grid: { display: false } }
        }
    }
});

// ==============================
// 차트 5: 월별 매출 상세 (1월, 2월 포함)
// ==============================
new Chart(document.getElementById('monthlyRevDetailChart'), {
    type: 'bar',
    data: {
        labels: ['10월', '11월', '12월', '1월', '2월(~8일)'],
        datasets: [
            { label: '객실매출(VAT포함)', data: [0, 48277123, 373096290, 618813926, 475340688], backgroundColor: colors.blue, borderRadius: 4 },
            { label: 'F&B매출', data: [0, 0, 49726474, 88002370, 18901400], backgroundColor: colors.orange, borderRadius: 4 },
            { label: '장기기숙사+관리비', data: [0, 0, 27086182, 0, 0], backgroundColor: colors.teal, borderRadius: 4 }
        ]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        plugins: { tooltip: { callbacks: { label: ctx => ctx.dataset.label + ': ' + fmt(ctx.raw) + '원' } } },
        scales: {
            x: { stacked: true },
            y: { stacked: true, ticks: { callback: v => (v/100000000).toFixed(1) + '억' } }
        }
    }
});

// ==============================
// 차트 6: ADR 추이
// ==============================
new Chart(document.getElementById('adrChart'), {
    type: 'line',
    data: {
        labels: monthlyRev.labels,
        datasets: [{
            label: 'ADR (원)',
            data: monthlyRev.adr,
            borderColor: colors.purple,
            backgroundColor: 'rgba(128,90,213,0.1)',
            fill: true,
            pointBackgroundColor: colors.purple,
            pointRadius: 6,
            borderWidth: 3,
            tension: 0.3
        }]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        plugins: { tooltip: { callbacks: { label: ctx => '₩' + fmt(ctx.raw) } } },
        scales: { y: { ticks: { callback: v => '₩' + fmt(v) } } }
    }
});

// ==============================
// 차트 7: 객실 vs 부대매출
// ==============================
new Chart(document.getElementById('roomVsOtherChart'), {
    type: 'pie',
    data: {
        labels: ['객실매출', 'F&B매출', '장기기숙사', '관리비'],
        datasets: [{
            data: [89.2, 9.2, 1.6, 0.01],
            backgroundColor: [colors.blue, colors.orange, colors.teal, colors.gray]
        }]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        plugins: {
            legend: { position: 'bottom' },
            tooltip: { callbacks: { label: ctx => ctx.label + ': ' + ctx.raw + '%' } }
        }
    }
});

// ==============================
// 차트 8: 비용 TOP 10
// ==============================
const sortedExp = [...expenseData].sort((a,b) => b.total - a.total).slice(0, 10);
new Chart(document.getElementById('expTop10Chart'), {
    type: 'bar',
    data: {
        labels: sortedExp.map(e => e.name),
        datasets: [{
            label: '금액',
            data: sortedExp.map(e => e.total),
            backgroundColor: [
                colors.red, colors.orange, colors.blue, colors.teal, colors.purple,
                colors.pink, colors.green, colors.yellow, colors.lightBlue, colors.gray
            ],
            borderRadius: 6
        }]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        indexAxis: 'y',
        plugins: {
            legend: { display: false },
            tooltip: { callbacks: { label: ctx => fmt(ctx.raw) + '원 (' + ((ctx.raw/totalExpense)*100).toFixed(1) + '%)' } }
        },
        scales: { x: { ticks: { callback: v => (v/10000).toFixed(0) + '만' } } }
    }
});

// ==============================
// 차트 9: 비용 카테고리 도넛
// ==============================
const categories = {
    '인건비': 50341753 + 5078144 + 13133000,
    '복리후생비': 46156426,
    '지급수수료': 152813303,
    '판매수수료': 8602634,
    '전력비': 73346603,
    '소모품비': 85784208,
    '객실소모품비': 21321283,
    '건물관리비': 14313314,
    '보험료': 12894840,
    '광고선전비': 11643455,
    '기타': 43749406
};
new Chart(document.getElementById('expCategoryChart'), {
    type: 'doughnut',
    data: {
        labels: Object.keys(categories),
        datasets: [{
            data: Object.values(categories),
            backgroundColor: [
                colors.red, colors.orange, colors.blue, colors.lightBlue, colors.yellow,
                colors.teal, colors.green, colors.purple, colors.pink, colors.gray, '#cbd5e0'
            ],
            borderWidth: 2, borderColor: '#fff'
        }]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        plugins: {
            legend: { position: 'right', labels: { font: { size: 11 }, padding: 8 } },
            tooltip: { callbacks: { label: ctx => ctx.label + ': ' + fmt(ctx.raw) + '원' } }
        }
    }
});

// ==============================
// 차트 10: 월별 비용 변동
// ==============================
new Chart(document.getElementById('monthlyExpTrendChart'), {
    type: 'bar',
    data: {
        labels: ['10월', '11월', '12월'],
        datasets: [
            { label: '인건비', data: [8825268, 23845833, 35881796], backgroundColor: colors.red, borderRadius: 4 },
            { label: '지급수수료', data: [1410000, 24401080, 127002223], backgroundColor: colors.blue, borderRadius: 4 },
            { label: '전력비', data: [0, 21011732, 52334871], backgroundColor: colors.yellow, borderRadius: 4 },
            { label: '소모품비', data: [0, 17311277, 68472931], backgroundColor: colors.teal, borderRadius: 4 },
            { label: '복리후생비', data: [1012000, 5292550, 39851876], backgroundColor: colors.orange, borderRadius: 4 }
        ]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        plugins: { tooltip: { callbacks: { label: ctx => ctx.dataset.label + ': ' + fmt(ctx.raw) + '원' } } },
        scales: {
            x: { stacked: true },
            y: { stacked: true, ticks: { callback: v => (v/100000000).toFixed(1) + '억' } }
        }
    }
});

// ==============================
// 비용 테이블 동적 생성
// ==============================
const expTbody = document.querySelector('#expenseTable tbody');
expenseData.forEach(e => {
    const pct = ((e.total / totalExpense) * 100).toFixed(1);
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${e.name}</td><td>${fmt(e.oct)}</td><td>${fmt(e.nov)}</td><td>${fmt(e.dec)}</td><td><strong>${fmt(e.total)}</strong></td><td>${pct}%</td>`;
    expTbody.appendChild(tr);
});
const totalRow = document.createElement('tr');
totalRow.className = 'total-row';
const octTotal = expenseData.reduce((s,e) => s+e.oct, 0);
const novTotal = expenseData.reduce((s,e) => s+e.nov, 0);
const decTotal = expenseData.reduce((s,e) => s+e.dec, 0);
totalRow.innerHTML = `<td>합계</td><td>${fmt(octTotal)}</td><td>${fmt(novTotal)}</td><td>${fmt(decTotal)}</td><td><strong>${fmt(totalExpense)}</strong></td><td>100%</td>`;
expTbody.appendChild(totalRow);

// ==============================
// 객실 운영 차트
// ==============================
new Chart(document.getElementById('roomOpsChart'), {
    type: 'bar',
    data: {
        labels: monthlyRev.labels,
        datasets: [
            {
                label: '매출 (억원)',
                data: monthlyRev.roomRev.map(v => v/100000000),
                backgroundColor: colors.blue,
                borderRadius: 6,
                yAxisID: 'y'
            },
            {
                label: 'ADR (만원)',
                data: monthlyRev.adr.map(v => v/10000),
                type: 'line',
                borderColor: colors.purple,
                pointBackgroundColor: colors.purple,
                pointRadius: 5,
                borderWidth: 2,
                yAxisID: 'y1'
            },
            {
                label: 'OCC (%)',
                data: monthlyRev.occ,
                type: 'line',
                borderColor: colors.red,
                pointBackgroundColor: colors.red,
                pointRadius: 5,
                borderWidth: 2,
                borderDash: [5,5],
                yAxisID: 'y1'
            }
        ]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        scales: {
            y: { position: 'left', title: { display: true, text: '매출 (억원)' } },
            y1: { position: 'right', title: { display: true, text: 'ADR(만원) / OCC(%)' }, grid: { display: false } }
        }
    }
});

// ==============================
// F&B 차트
// ==============================
new Chart(document.getElementById('fnbDec'), {
    type: 'doughnut',
    data: {
        labels: ['프론트', '룸서비스', '레스토랑'],
        datasets: [{
            data: [33874074, 7264200, 8588200],
            backgroundColor: [colors.blue, colors.orange, colors.teal],
            borderWidth: 2, borderColor: '#fff'
        }]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        plugins: {
            legend: { position: 'bottom' },
            tooltip: { callbacks: { label: ctx => ctx.label + ': ' + fmt(ctx.raw) + '원' } }
        }
    }
});

new Chart(document.getElementById('fnbJan'), {
    type: 'doughnut',
    data: {
        labels: ['프론트', '룸서비스', '레스토랑', '밀키샵'],
        datasets: [{
            data: [46968220, 23162400, 16909400, 962350],
            backgroundColor: [colors.blue, colors.orange, colors.teal, colors.pink],
            borderWidth: 2, borderColor: '#fff'
        }]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        plugins: {
            legend: { position: 'bottom' },
            tooltip: { callbacks: { label: ctx => ctx.label + ': ' + fmt(ctx.raw) + '원' } }
        }
    }
});

new Chart(document.getElementById('fnbCompareChart'), {
    type: 'bar',
    data: {
        labels: ['프론트', '룸서비스', '레스토랑', '밀키샵'],
        datasets: [
            { label: '12월', data: [33874074, 7264200, 8588200, 0], backgroundColor: colors.lightBlue, borderRadius: 4 },
            { label: '1월', data: [46968220, 23162400, 16909400, 962350], backgroundColor: colors.blue, borderRadius: 4 }
        ]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        plugins: { tooltip: { callbacks: { label: ctx => ctx.dataset.label + ': ' + fmt(ctx.raw) + '원' } } },
        scales: { y: { ticks: { callback: v => (v/10000).toFixed(0) + '만' } } }
    }
});

// ==============================
// F&B 월별 총 매출 추이 차트
// ==============================
new Chart(document.getElementById('fnbMonthlyTotal'), {
    type: 'bar',
    data: {
        labels: ['25년 12월', '26년 1월', '26년 2월(~9일)'],
        datasets: [{
            label: 'F&B 총 매출',
            data: [49726474, 88002370, 18901400],
            backgroundColor: [colors.lightBlue, colors.blue, colors.orange],
            borderRadius: 6
        }]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        plugins: {
            legend: { display: false },
            tooltip: { callbacks: { label: ctx => fmt(ctx.raw) + '원' } }
        },
        scales: {
            y: {
                ticks: { callback: v => (v/10000).toFixed(0) + '만' },
                grid: { color: '#f0f0f0' }
            }
        }
    }
});

// ==============================
// 손익 Waterfall 차트
// ==============================
new Chart(document.getElementById('waterfallChart'), {
    type: 'bar',
    data: {
        labels: ['매출', '비용', '영업손실', '영업외수익', '순손실'],
        datasets: [{
            label: '금액',
            data: [419192517, -539784612, -120592095, 41510778, -79082217],
            backgroundColor: ctx => {
                const v = ctx.raw;
                if (ctx.dataIndex === 0 || ctx.dataIndex === 3) return colors.green;
                if (ctx.dataIndex === 1) return colors.red;
                return colors.orange;
            },
            borderRadius: 6
        }]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        plugins: {
            legend: { display: false },
            tooltip: { callbacks: { label: ctx => fmt(ctx.raw) + '원' } }
        },
        scales: { y: { ticks: { callback: v => (v/100000000).toFixed(1) + '억' } } }
    }
});

// ==============================
// 비용 커버리지 게이지
// ==============================
new Chart(document.getElementById('coverageChart'), {
    type: 'bar',
    data: {
        labels: ['매출로 비용 충당률', '영업외수익 포함 충당률'],
        datasets: [{
            label: '충당률 (%)',
            data: [77.7, 85.3],
            backgroundColor: [colors.orange, colors.blue],
            borderRadius: 6
        }]
    },
    options: {
        responsive: true, maintainAspectRatio: false,
        indexAxis: 'y',
        plugins: {
            legend: { display: false },
            tooltip: { callbacks: { label: ctx => ctx.raw + '%' } }
        },
        scales: { x: { max: 100, ticks: { callback: v => v + '%' } } }
    }
});
</script>

</body>
</html>
